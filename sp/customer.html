<div id="custInfo">

    <div class="headBar">
        <span>Customer Details</span>
    </div>
    <div class="bodyContainer">
        <div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Customer id</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.healyoscustid}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Name</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.name}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>DOB</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.birthdate}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Age</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.age}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Contact number</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span><a ng-href="tel:{{custReadList.phone}}">{{custReadList.phone}}</a></span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Alternate contact number</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span><a ng-href="{{custReadList.altphno}}">{{custReadList.altphno}}</a></span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Email</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span class="breakWord">
                        <a ng-href="mailto:{{custReadList.email}}">{{custReadList.email}}</a>
                    </span>
                </div>
            </div>
            <div class="row" ng-hide="apptClinicId != undefined && apptClinicId != ''">
                <div class="col-sm-4 col-xs-5"><label>Residential Address</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.address}}</span>
                </div>
            </div>

            <div class="row" ng-hide="apptClinicId != undefined && apptClinicId != ''">
                <div class="col-sm-4 col-xs-5"><label>Location</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.locality}}, {{custReadList.city}}, {{custReadList.state}}, {{custReadList.country}}</span>
                </div>
            </div>

            <div class="row" ng-hide="apptClinicId != undefined && apptClinicId != ''">
                <div class="col-sm-4 col-xs-5"><label>Pincode</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.pincode}}</span>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <div class="headBar">
                        <span>Wallet Details</span>
                    </div>
                    <div class="bodyContainer">
                        <form name="walletForm">
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Current Balance</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    <span ng-if="custReadList.custwallet.currency.toLowerCase() == 'inr'">&#8377; </span>{{custReadList.custwallet.walletbalance}}
                                </div>
                            </div>
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Transact</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    <input type="text" 
                                        placeholder="amount" 
                                        class="form-control" 
                                        style="max-width: 200px;"
                                        ng-model="custReadList.custwallet.amount"
                                        ng-pattern="/^\d+(\.\d{1,2})?$/"
                                        ng-required = "true" />
                                </div>
                            </div>
                            <div class="footerBar" style="padding: 0 10px; margin: 0 -10px;">
                                <input type="button" 
                                    class="btn btn-primary" 
                                    value="Deposit"
                                    ng-disabled="walletForm.$invalid || custReadList.custwallet.amount.startsWith('0')""
                                    ng-click="onWalletTransact('credit')" />

                                <span class="alert" 
                                    ng-if="custReadList.custwallet.response"
                                    ng-class="{'alert-success' : custReadList.custwallet.response.status == 'success', 'alert-danger' : custReadList.custwallet.response.status == 'error'}">
                                    {{custReadList.custwallet.response.message}}
                                </span>
                            </div>
                        </form>
                    </div>
                </div>
            </div> <!-- End of wallet details -->

            <div class="row" ng-show="custOldPackage.package_code">
                <div class="col-xs-12">
                    <div class="headBar">
                        <span>Package Details</span>
                    </div>
                    <div class="bodyContainer">
                        <form name="sessionsForm">
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Package</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    {{custOldPackage.package_code}}
                                </div>
                            </div>
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Left Sessions</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    {{custLeftPackageSeesion}}
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div> <!-- End of Sessions Details -->

            <div class="row">
                <div style="margin: 0 15px">
                    <div class="headBar">
                        <span>Customer Appointment History </span>
                        <span class="pull-right">
                            <span title="Schedule new appointment"
                                  class="clickable glyphicon glyphicon-plus"
                                  style="margin-right:5px;"
                                  ng-click="scrollToTop(); spNewApptForCust();"
                                  ng-disabled="((custLeftApptCount != 'NA' && custLeftApptCount > 0) || custPromocode == 'NA')"></span>
                        </span>
                    </div>
                    <div class="bodyContainer">
                        <div class="appointmentsTable table-responsive">
                            <table class="table table-striped table-condensed" ng-init="sortKey = 'starttime';">
                                <thead>
                                <tr>
                                    <th ng-click="sort('starttime')">Date
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='starttime'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('refno')">Ref No
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='refno'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('zone')">Area
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='zone'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('spname')" nowrap>Service Provider
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='spname'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('service')">Service
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='service'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('state')">State
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='state'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('rating')">Rating
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='rating'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('payment')">Payment
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='payment'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('gender')" style="display:none;">Gender
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='gender'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('service')" style="display:none;">Service
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='service'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr dir-paginate="apt in custAptHistory|orderBy:sortKey:!reverse|filter:search|itemsPerPage:10"
                                    pagination-id="custAptHistoryId">
                                    <td>{{apt.starttime * 1000 | date:'yyyy-MM-dd hh:mm a'}}</td>
                                    <td>
                                        <code><a href="#" ng-click="showAppointment(apt, 'customer')" title="Show Appointment Details">{{apt.refno}}</a></code>
                                    </td>
                                    <td>{{apt.zone}}</td>
                                    <td>{{apt.spname}}</td>
                                    <td>{{apt.service}}</td>
                                    <td>{{apt.state}}</td>
                                    <td nowrap>
                                        <div data-ng-if = "apt.rating">
                                            <span ng-class="apt.rating >= 1 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 2 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 3 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 4 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 5 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                        </div>
                                        <div data-ng-if = "!apt.rating">
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-
                                        </div>

                                    </td>
                                    <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{apt.amnt}}</td>
                                    <td style="display:none;">{{apt.gender}}</td>
                                    <td style="display:none;">{{apt.service}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <dir-pagination-controls
                                max-size="5"
                                pagination-id="custAptHistoryId"
                                direction-links="true"
                                boundary-links="true" >
                            </dir-pagination-controls>
                        </div>
                        <div style = "color: green; margin-top: 10px;" data-ng-if = "!aptErrorMsg && !custAptHistory">
                            No appointments scheduled.
                        </div>
                        <div class="alert alert-danger" data-ng-if = "aptErrorMsg">
                            {{aptErrorMsg}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>