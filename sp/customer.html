<div id="custInfo">

    <div class="headBar">
        <span>Customer Details</span>
    </div>
    <div class="bodyContainer">
        <div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Customer id</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.healyoscustid}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Name</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.name}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>DOB</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.birthdate}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Age</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.age}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Contact number</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span><a ng-href="tel:{{custReadList.phone}}">{{custReadList.phone}}</a></span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Alternate contact number</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span><a ng-href="{{custReadList.altphno}}">{{custReadList.altphno}}</a></span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Email</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span class="breakWord">
                        <a ng-href="mailto:{{custReadList.email}}">{{custReadList.email}}</a>
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Residential Address</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.address}}</span>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Location</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.locality}}, {{custReadList.city}}, {{custReadList.state}}, {{custReadList.country}}</span>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Pincode</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span>{{custReadList.pincode}}</span>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-4 col-xs-5"><label>Converted</label></div>
                <div class="col-sm-8 col-xs-7">
                    <span class="colonSeparatorRight">:</span>
                    <span class="colonSeparatorRight">:</span>{{custReadList.isconverted === true ? "YES" : "NO"}}</span>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <div class="headBar">
                        <span>Wallet Details</span>
                    </div>
                    <div class="bodyContainer">
                        <form name="walletForm">
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Current Balance</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    <span ng-if="custReadList.custwallet.currency.toLowerCase() == 'inr'">&#8377; </span>{{custReadList.custwallet.walletbalance}}
                                </div>
                            </div>
                            <!--<div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Transact</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    <input type="text" 
                                        placeholder="amount" 
                                        class="form-control" 
                                        style="max-width: 250px;"
                                        ng-model="custReadList.custwallet.amount"
                                        ng-pattern="/^\d+(\.\d{1,2})?$/"
                                        ng-required = "true" />
                                </div>
                            </div>
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Description</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    <textarea class="form-control" rows="3" ng-model="custReadList.custwallet.description" style="max-width: 250px;"></textarea>
                                </div>
                            </div>
                            <div class="footerBar" style="padding: 0 10px; margin: 0 -10px;">
                                <input type="button" 
                                    class="btn btn-primary" 
                                    value="Deposit"
                                    ng-disabled="((walletForm.$invalid || custReadList.custwallet.amount.startsWith('0'))) || (custReadList.custwallet.description == '')"
                                    ng-click="onWalletTransact('credit')" />

                                <span class="alert" 
                                    ng-if="custReadList.custwallet.response"
                                    ng-class="{'alert-success' : custReadList.custwallet.response.status == 'success', 'alert-danger' : custReadList.custwallet.response.status == 'error'}">
                                    {{custReadList.custwallet.response.message}}
                                </span>
                            </div>-->
                        </form>
                    </div>
                </div>
            </div> <!-- End of wallet details -->

            <div class="row" ng-show="custOldPackage.is_package_assign">
                <div class="col-xs-12">
                    <div class="headBar">
                         <span>Package Details</span>
                         <span style="float:right;">    

                             <span>
                                <span 
                                    title="Cancel Package"
                                    class="clickable glyphicon glyphicon-th-list"
                                    style="margin-right:15px; font-size: 15px;"
                                    ng-click="requestPackageCancel()"></span>
                            </span> 
                        </span> 
                    </div>
                    <div class="bodyContainer">
                        <form name="sessionsForm">
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Package</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    {{custOldPackage.package_code}}
                                </div>
                            </div>
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Left Sessions</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    {{custLeftPackageSeesion}}
                                </div>
                            </div>
                            <div class="row middleRowContent">
                                <div class="itemLabel2 col-xs-4">
                                    <label>Valid Till</label>
                                </div>
                                <div class="col-xs-8">
                                    <span class="colonSeparatorRight">:</span>
                                    {{packageValidTillDate}}
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div> <!-- End of Sessions Details -->




            <div class="row">
                <div class="col-xs-12">
                    <div class="headBar">
                         <span>Add Services And Products</span>
                    </div>
                    <div class="bodyContainer">
                        <form name="sessionsServiceProductForm">
                             <!--<div class="row" style="padding: 0px 0px 15px 0px;">
                                <div class="col-sm-6 col-xs-6">
                                    <div class="followup-appt-time-slot"
                                        style="padding: 10px;">
                                         <label style="width: 100%;">Services/Products In Account 
                                        </label>
                                        <div style="overflow-x:hidden;overflow-y:auto;height: 80px;">   
                                                 <div class = "row">
                                                                <span class= "col-sm-5"><label>Name</label></span>
                                                                <span class= "col-sm-2"><label>Qty</label></span>
                                                                <span class= "col-sm-5"><label>Price</label>
                                                </div>  
                                                <div class = "row"
                                                    ng-repeat="rec in productServiceTrans">
                                                                <span class= "col-sm-5">{{rec.name }}</span>
                                                                <span class= "col-sm-2">1</span>
                                                                <span class= "col-sm-5">Rs.{{rec.price }}</span>
                                                            
                                                </div>                                      
                                        </div>
                                    </div>                  
                                </div>
                            </div>-->

                            <div class="row">
                                <div class="col-sm-6 col-xs-12">
                                    <div class="row middleRowContent" style="padding: 22px 0px 0px 0px;">
                                        <span class="itemLabel2 col-xs-3">Services:</span>
                                        <div class="col-xs-5">
                                           <select class="form-control" name="service"
                                                data-ng-model = "service"
                                                title = "Services"
                                                ng-options="rec.name for rec in services"
                                                data-ng-required = "true">
                                                <option value="">Select Service</option>
                                              
                                            </select>
                                        </div>
                                        <div class="col-xs-2">
                                             <input type="number"
                                                        class="form-control"
                                                        ng-model="serviceQty"
                                                        min='1'
                                                        max='120'
                                                        step='1'
                                                        ng-required = "true"
                                                        style="min-width: 40px;"
                                                        name="serviceQty" />

                                        </div>
                                        <div class="col-xs-2">
                                             <button type="button" 
                                                title="Add Services" 
                                                class="btn btn-default btn-sm" 
                                                style="margin-top: 6px;"
                                                ng-click="AddService(service,serviceQty)">
                                                <i class="glyphicon glyphicon-arrow-right hidden-xs"></i>
                                                <i class="glyphicon glyphicon-arrow-down hidden-sm hidden-md hidden-lg"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="row middleRowContent">
                                        <span class="itemLabel2 col-xs-3">Products:</span>
                                        <div class="col-xs-5">
                                           <select class="form-control" name="product"
                                                data-ng-model = "product"
                                                title = "Products"
                                                ng-options="rec.name for rec in products"
                                                data-ng-required = "true">
                                                <option value="">Select Product</option>
                                              
                                            </select>
                                        </div>
                                        <div class="col-xs-2">
                                             <input type="number"
                                                        class="form-control"
                                                        ng-model="productQty"
                                                        min='1'
                                                        max='120'
                                                        step='1'
                                                        ng-required = "true"
                                                        style="min-width: 40px;"
                                                        name="productQty" />

                                        </div>
                                        <div class="col-xs-2">
                                              <button type="button" 
                                                title="Add Products" 
                                                class="btn btn-default btn-sm"
                                                style="margin-top: 6px;"
                                                ng-click="AddProduct(product,productQty)">
                                                 <i class="glyphicon glyphicon-arrow-right hidden-xs"></i>
                                                <i class="glyphicon glyphicon-arrow-down hidden-sm hidden-md hidden-lg"></i>
                                            </button>
                                        </div>
                                    </div>

                                </div>

                                <div class='col-sm-6 col-xs-12'>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="followup-appt-time-slot"
                                                style="padding: 10px;">
                                                 <label style="width: 100%;">Service/Product List 
                                                    <span class="pull-right">Total:{{productServiceTotal}}</span>
                                                </label>
                                                <div style="overflow-x:hidden;overflow-y:auto;height: 80px;">   
                                                        <div class = "row">
                                                                        <span class= "col-sm-5"><label>Name1</label></span>
                                                                        <span class= "col-sm-1"><label>Qty</label></span>
                                                                        <span class= "col-sm-2"><label>Price</label></span>
                                                                        <span class= "col-sm-4" ><label>Remove</label></span>
                                                        </div>          
                                                        <div class = "row"
                                                            ng-repeat="rec in productServiceList">
                                                                        <span class= "col-sm-5">{{rec.name }}</span>
                                                                        <span class= "col-sm-1">{{rec.qty }}</span>
                                                                        <span class= "col-sm-2">Rs.{{rec.totprice }}</span>
                                                                        <span class= "col-sm-4" ng-click="removeItem(rec)" title='remove item'><i class="glyphicon glyphicon-remove" style="cursor:pointer;color:red"></i></span>
                                                        </div> 
                                                        <div class = "row"
                                                            ng-repeat="rec in uniqueProductsAndServices" style="background:#fbf165;">
                                                                        <span class= "col-sm-5">{{rec.name }}</span>
                                                                        <span class= "col-sm-1">{{rec.qty }}</span>
                                                                        <span class= "col-sm-2">Rs.{{rec.totprice }}</span>
                                                                        <span class= "col-sm-4"></span>
                                                                    
                                                        </div>                                      
                                                </div>
                                            </div>                  
                                        </div>
                                     </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">

                                    <span class="alert" 
                                        ng-if="custReadList.custwallet.response"
                                        ng-class="{'alert-success' : custReadList.custwallet.response.status == 'success', 'alert-danger' : custReadList.custwallet.response.status == 'error'}">
                                        {{custReadList.custwallet.response.message}}
                                    </span>
                                    <br />
                                    <span ng-if="productServiceList.length > 0">
                                        <a title='Add money into wallet' class='clickable' style='margin-right: 15px; font-size: 15px;' ng-click='updateWalletForServiceProduct()'>Add Money(&#8377;) In Wallet</a>  
                                    </span>
                                </div>                               
                            </div>

                            <!--<div class="footerBar">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <button ng-disabled="!walletTopUp" class="btn btn-primary btn-sm" ng-click="addServicesProductsTrans()"> Save 
                                        </button>
                                     </div> 
                                </div>
                            </div>-->
                            
                        </form>
                    </div>
                </div>
            </div> <!-- Services And Products -->





            <div class="row">
                <div style="margin: 0 15px">
                    <div class="headBar">
                        <span>Customer Appointment History </span>
                        <span class="pull-right">
                            <span title="Schedule new appointment"
                                  class="clickable glyphicon glyphicon-plus"
                                  style="margin-right:5px;"
                                  ng-click="scrollToTop(); spNewApptForCust();"
                                  ng-disabled="((custLeftApptCount != 'NA' && custLeftApptCount > 0) || custPromocode == 'NA')"></span>
                        </span>
                    </div>
                    <div class="bodyContainer">
                        <div class="appointmentsTable table-responsive">
                            <table class="table table-striped table-condensed" ng-init="sortKey = 'starttime';">
                                <thead>
                                <tr>
                                    <th ng-click="sort('starttime')">Date
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='starttime'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('refno')">Ref No
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='refno'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('zone')">Area
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='zone'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('spname')" nowrap>Service Provider
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='spname'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('service')">Service
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='service'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('state')">State
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='state'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('rating')">Rating
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='rating'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('payment')">Payment
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='payment'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('gender')" style="display:none;">Gender
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='gender'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th ng-click="sort('service')" style="display:none;">Service
                                        <span class="glyphicon sort-icon" ng-show="sortKey=='service'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr dir-paginate="apt in custAptHistory|orderBy:sortKey:!reverse|filter:search|itemsPerPage:10"
                                    pagination-id="custAptHistoryId">
                                    <td>{{apt.starttime * 1000 | date:'yyyy-MM-dd hh:mm a'}}</td>
                                    <td>
                                        <code><a href="#" ng-click="showAppointment(apt, 'customer')" title="Show Appointment Details">{{apt.refno}}</a></code>
                                    </td>
                                    <td>{{apt.zone}}</td>
                                    <td>{{apt.spname}}</td>
                                    <td>{{apt.service}}</td>
                                    <td>{{apt.state}}</td>
                                    <td nowrap>
                                        <div data-ng-if = "apt.rating">
                                            <span ng-class="apt.rating >= 1 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 2 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 3 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 4 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                            <span ng-class="apt.rating >= 5 ? 'glyphicon glyphicon-star' : 'glyphicon glyphicon-star-empty'"></span>
                                        </div>
                                        <div data-ng-if = "!apt.rating">
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-
                                        </div>

                                    </td>
                                    <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{apt.amnt}}</td>
                                    <td style="display:none;">{{apt.gender}}</td>
                                    <td style="display:none;">{{apt.service}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <dir-pagination-controls
                                max-size="5"
                                pagination-id="custAptHistoryId"
                                direction-links="true"
                                boundary-links="true" >
                            </dir-pagination-controls>
                        </div>
                        <div style = "color: green; margin-top: 10px;" data-ng-if = "!aptErrorMsg && !custAptHistory">
                            No appointments scheduled.
                        </div>
                        <div class="alert alert-danger" data-ng-if = "aptErrorMsg">
                            {{aptErrorMsg}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>