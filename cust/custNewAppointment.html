<div id="q1" class="mainContent" ng-controller="CustCtrl" data-ng-init="initCache();">
    <div style="padding:10px;">
        <form name="custNewAppointmentForm.custForm" data-ng-init="initCustCities();" data-ng-submit="" novalidate>
            <div ng-show="custDetails" id="custDetails">
                <div style="min-height: 275px; float:left; width:100%;">
                    <table border="0" width="100%">
                        <tr>
                            <th colspan="2">Customer Details</th>
                        </tr>
                        <tr><td colspan="2">&nbsp;&nbsp;</td></tr>

                        <tr>
                            <td align="right" width="20%">Problem : </td>
                            <td>
                                <select ng-model="custNewAppointment.Problem" name="patientProblem"
                                class="clstxt2 clsspace2"
                                data-ng-class = "{red2: custNewAppointmentForm.custForm.patientProblem.$invalid && custNewAppointmentForm.custForm.patientProblem.$dirty, green2: custNewAppointmentForm.custForm.patientProblem.$valid && custNewAppointmentForm.custForm.patientProblem.$dirty}"
                                title = "Select customer problem"
                                ng-options="Problem as Problem for Problem in customerProblem">
                                <option value="">Select customer problem</option>
                            </select>
								<span style="color:red" data-ng-show="custNewAppointmentForm.custForm.patientProblem.$dirty && custNewAppointmentForm.custForm.patientProblem.$invalid">
									<span data-ng-show="custNewAppointmentForm.custForm.patientProblem.$error.required">City is required.</span>
								</span>
                            </td>
                        </tr>

                        <tr>
                            <td align="right" width="20%">City : </td>
                            <td>
                                <div class="clsfleft" data-ng-if="users2.disableFlagCity">
                                    <select ng-model="users2.city" name="patientCity"
                                    class="clstxt2 clsspace2"
                                    id = "quickAppointmentPatientCityId1"
                                    data-ng-class = "{red2: custNewAppointmentForm.custForm.patientCity.$invalid && custNewAppointmentForm.custForm.patientCity.$dirty, green2: custNewAppointmentForm.custForm.patientCity.$valid && custNewAppointmentForm.custForm.patientCity.$dirty}"
                                    title = "Select customer city"
                                    data-ng-init="custPin(users2.city)"
                                    ng-options="city.id as city.name for city in custCities1"
                                    data-ng-disabled = "users2.disableFlagCity">
                                    <option value="">Select customer city</option>
                                </select>
                                </div>
                                <div class="clsfleft" data-ng-if="!users2.disableFlagCity">
                                     <select ng-model="users2.city" name="patientCity"
                                     class="clstxt2 clsspace2"
                                     id = "quickAppointmentPatientCityId2"
                                     data-ng-class = "{red2: custNewAppointmentForm.custForm.patientCity.$invalid && custNewAppointmentForm.custForm.patientCity.$dirty, green2: custNewAppointmentForm.custForm.patientCity.$valid && custNewAppointmentForm.custForm.patientCity.$dirty}"
                                     title = "Select customer city"
                                     data-ng-change="custPin(users2.city)"
                                     ng-options="city.id as city.name for city in custCities1"
                                     data-ng-required = "true"
                                     data-ng-disabled = "users2.disableFlagCity">
                                    <option value="">Select customer city</option>
                                </select>
									<span style="color:red" data-ng-show="custNewAppointmentForm.custForm.patientCity.$dirty && custNewAppointmentForm.custForm.patientCity.$invalid">
										<span data-ng-show="custNewAppointmentForm.custForm.patientCity.$error.required">City is required.</span>
									</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">Name : </td>
                            <td>
                                <input class="clstxt2 clsspace2" type="text"
                                name="patientName"
                                data-ng-model = "users2.name"
                                data-ng-pattern = "/^[a-zA-Z\s]*$/"
                                data-ng-class = "{red1: custNewAppointmentForm.custForm.patientName.$invalid && custNewAppointmentForm.custForm.patientName.$dirty, green1: custNewAppointmentForm.custForm.patientName.$valid && custNewAppointmentForm.custForm.patientName.$dirty}"
                                title = "Enter customer name"
                                placeholder = "Enter customer name"
                                data-ng-required = "true"
                                data-ng-readonly = "users2.disableFlagName"
                                    />
								<span style="color:red" data-ng-show="custNewAppointmentForm.custForm.patientName.$dirty && custNewAppointmentForm.custForm.patientName.$invalid">
									<span data-ng-show="custNewAppointmentForm.custForm.patientName.$error.required"> Name is required. </span>
									<span data-ng-show="custNewAppointmentForm.custForm.patientName.$error.pattern"> Invalid name. </span>
								</span>
                            </td>
                        </tr>
						
						<tr>
							<td align="right">Gender : </td>
							<td>
								<select class="clstxt2 clsspace2" name="patientGender"
									    data-ng-model = "custNewAppointment.gender"
										data-ng-class = "{red2: custNewAppointmentForm.custForm.patientGender.$invalid && custNewAppointmentForm.custForm.patientGender.$dirty, green2: custNewAppointmentForm.custForm.patientGender.$valid && custNewAppointmentForm.custForm.patientGender.$dirty}"
										title = "Select customer gender"
										ng-options="gender.id as gender.name for gender in custGender"
										data-ng-required = "true"
                                        data-ng-disabled= "users2.disableFlagGender">
									<option value="">Select customer gender</option>
								</select>
								<span style = "color:red" data-ng-show = "custNewAppointmentForm.custForm.patientGender.$dirty && custNewAppointmentForm.custForm.patientGender.$invalid">
									<span data-ng-show = "custNewAppointmentForm.custForm.patientGender.$error.required"> Gender is required. </span>
								</span>
							</td>
						</tr>
                        <tr>
                            <td align="right">Contact number : </td>
                            <td>
                                <input class="clstxt2 clsspace2" type="text"
                                name="patientPhoneNumber"
                                maxlength="12"
                                data-ng-model = "users2.contactNo"
                                data-ng-pattern = "/^\d*$/"
                                data-ng-class = "{red1: custNewAppointmentForm.custForm.patientPhoneNumber.$invalid && custNewAppointmentForm.custForm.patientPhoneNumber.$dirty, green1: custNewAppointmentForm.custForm.patientPhoneNumber.$valid && custNewAppointmentForm.custForm.patientPhoneNumber.$dirty}"
                                title = "Enter customer contact number"
                                placeholder = "Enter customer contact number"
                                data-ng-required = "true"
                                data-ng-readonly = "users2.disableFlagPhone"
                                    />
								<span style="color:red" data-ng-show = "custNewAppointmentForm.custForm.patientPhoneNumber.$dirty && custNewAppointmentForm.custForm.patientPhoneNumber.$invalid">
									<span data-ng-show="custNewAppointmentForm.custForm.patientPhoneNumber.$error.pattern"> Invalid contact number. </span>
									<span data-ng-show="custNewAppointmentForm.custForm.patientPhoneNumber.$error.required">Contact number is required.</span>
								</span>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">Email address: </td>
                            <td>
                                <input class="clstxt2 clsspace2" type="text"
                                name="patientEmail"
                                data-ng-model = "users2.email"
                                data-ng-pattern = "/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/"
                                data-ng-class = "{red1: custNewAppointmentForm.custForm.patientEmail.$invalid && custNewAppointmentForm.custForm.patientEmail.$dirty && visitedAdminNewAppointmentCustEmail, green1: custNewAppointmentForm.custForm.patientEmail.$valid && custNewAppointmentForm.custForm.patientEmail.$dirty && visitedAdminNewAppointmentCustEmail}"
                                title = "Enter customer email address"
                                placeholder = "Enter customer email address"
                                data-ng-blur = "visitedAdminNewAppointmentCustEmail = true"
                                data-ng-focus = "visitedAdminNewAppointmentCustEmail = false"
                                data-ng-required = "true"
                                data-ng-readonly = "users2.disableFlagEmail"
                                    />
								<span style = "color:red" data-ng-show = "custNewAppointmentForm.custForm.patientEmail.$dirty && custNewAppointmentForm.custForm.patientEmail.$invalid && visitedAdminNewAppointmentCustEmail">
									<span data-ng-show = "custNewAppointmentForm.custForm.patientEmail.$error.required"> Email address is required. </span>
									<span data-ng-show = "custNewAppointmentForm.custForm.patientEmail.$error.pattern"> Invalid email address. </span>
								</span>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">Pincode : </td>
                            <td>
                                <select class="clstxt2 clsspace2" name="patientPincode"
                                ng-model = "custNewAppointment.pincode"
                                data-ng-class = "{red2: custNewAppointmentForm.custForm.patientPincode.$invalid && custNewAppointmentForm.custForm.patientPincode.$dirty, green2: custNewAppointmentForm.custForm.patientPincode.$valid && custNewAppointmentForm.custForm.patientPincode.$dirty}"
                                title = "Select customer pincode"
                                ng-options="pincode.pin as pincode.pin for pincode in custPinLocalities | orderBy:'pin'"
                                1ng-options="city.id as city.name for city in custCities1"
                                ng-change="filterArea(custNewAppointment.pincode);"
                                data-ng-required = "true">
                                <option value="">Select customer pincode</option>
                            </select>
								<span style = "color:red" data-ng-show = "custNewAppointmentForm.custForm.patientPincode.$dirty && custNewAppointmentForm.custForm.patientPincode.$invalid">
									<span data-ng-show = "custNewAppointmentForm.custForm.patientPincode.$error.required"> Pincode is required. </span>
								</span>
                            </td>
                        </tr>

                        <tr>
                            <td align="right">Area : </td>
                            <td>
                                <select class="clstxt2 clsspace2" name="patientZone" id="f1"
                                data-ng-model = "custNewAppointment.zone"
                                data-ng-class = "{red2: custNewAppointmentForm.custForm.patientZone.$invalid && custNewAppointmentForm.custForm.patientZone.$dirty, green2: custNewAppointmentForm.custForm.patientZone.$valid && custNewAppointmentForm.custForm.patientZone.$dirty}"
                                title = "Select customer area"
                                ng-options="zone.zoneid as zone.zonename for zone in custZones"
                                ng-change="filterPin(custNewAppointment.zone);"
                                data-ng-required = "true">
                                <option value="">Select customer area</option>
                            </select>
								<span style="color:red" data-ng-show = "custNewAppointmentForm.custForm.patientZone.$dirty && custNewAppointmentForm.custForm.patientZone.$invalid">
									<span data-ng-show = "custNewAppointmentForm.custForm.patientZone.$error.required"> Area is required. </span>
								</span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">&nbsp;</td>
                        </tr>
                        <tr>
                            <td colspan="2">&nbsp;</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:{{clscolor}};" ng-show="custRecordEnqMsg">{{custRecordEnqMsg1}}</span></td>
                        </tr>

                    </table>
                </div>
                <div style="float: right;">
                    <!-- <input style="margin:0;" type="button" value="Record Enquiry" ng-disabled="!(!!users2.city && !!users2.name
					&& !!users2.contactNo && !!users2.email && !!custNewAppointment.pincode && !!custNewAppointment.zone)" ng-click="aptRecordEnquiry()" />&nbsp;&nbsp;&nbsp;&nbsp; -->
                    <button style="float:right" ng-click="showNext('serviceProvider'); getMonthlyAppointmentAvailability(custNewAppointment.pincode, custNewAppointment.zone)" type="button" ng-disabled="!(!!users2.city && !!users2.name
					&& !!users2.contactNo && !!users2.email && !!custNewAppointment.pincode && !!custNewAppointment.zone && !!custNewAppointment.Problem && !!custNewAppointment.gender)"> Next </button>
                </div>
            </div>

            <div ng-show="serviceProvider" id="serviceProvider" style="padding: 10px;">
                <div id="divSP" style="min-height: 275px; position:relative;">
                    <table border="0" width="100%">
                        <tr>
                            <th colspan="2">Select Appointment Slot</th>
                        </tr>
                        <tr><td colspan="2">&nbsp;</td></tr>
                        <!-- <tr>
                            <td class="clswidth1" align="right">Select service :</td>
                            <td>
                                <select class="clstxt2 clsspace2" name="patientService" id="f2"
                                data-ng-model = "custNewAppointment.service"
                                data-ng-class = "{red2: custNewAppointmentForm.custForm.patientService.$invalid && custNewAppointmentForm.custForm.patientService.$dirty, green2: custNewAppointmentForm.custForm.patientService.$valid && custNewAppointmentForm.custForm.patientService.$dirty}"
                                title = "Select service"
                                ng-options="service.id as service.servicename for service in servicesList"
								ng-change="fnServiceChange()"
                                data-ng-required = "true">
                                <option value="">Select service</option>
                            </select>
								<span style = "color:red" data-ng-show = "custNewAppointmentForm.custForm.patientService.$dirty && custNewAppointmentForm.custForm.patientService.$invalid">
									<span data-ng-show = "custNewAppointmentForm.custForm.patientService.$error.required">Service is required.</span>
								</span>
                            </td>
                        </tr> -->

                        <!--<tr>
                            <td class="clswidth1" align="right">Select Date :</td>
                            <td>
                                <input type="text" class="clsspace2" placeholder="Select Date" id="datetimepicker3" />
                                &lt;!&ndash; <input type="button" value="click" ng-click="getSpInfo(custNewAppointment.zone.zoneid, custNewAppointment.service.id, custNewAppointment.pincode.pin);" /> &ndash;&gt;
                                &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff0000;" ng-show="wtUndefined" ng-model="wtUndefined">{{wtUndefinedErrorMsg}}</span>
                            </td>
                        </tr>-->

                        <!--<tr>
                            <td>
                                Selected date is: <em>{{dt | date:'fullDate' }}</em>
                            </td>
                        </tr>-->
                        <tr></tr>
                        <tr></tr>
                        <tr>
                            <td>
                                <div style="display:inline-block; min-height:290px;">
                                    <datepicker id="datetimepicker3" date-disabled="disabled(date, mode)" ng-change="callSpInfo()" ng-model="dt" min-date="minDate" max-date="maxDate" show-weeks="false" class="well well-sm" custom-class="getDayClass(date, mode)"></datepicker>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color:#ff0000;" ng-show="wtUndefined" ng-model="wtUndefined">{{wtUndefinedErrorMsg}}</span>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2">
                                <div ng-show="spInfo" id="spInfo">
                                    <table width="100%">
                                        <tr>
                                            <td class="clswidth1" align="left" style="vertical-align:top">
                                                Available Appointment Slots on <em style="font-weight:bold">{{dt | date:'fullDate' }}</em> are:
                                            </td>
                                        </tr>
                                        <tr>
                                            <td  align="right">
                                                <div id="workingTime" style="padding-left:3px">
                                                    <table width="100%">
                                                        <tr>
                                                            <td width="11%" style="vertical-align:top">
                                                                <!-- <div style="float: left; width: 20%; padding-left: 4px;">
                                                                    <div style="padding: 1px 0;" ng-repeat="aptstarttime in aptStartTime track by $index">
                                                                        <input type="radio" ng-model="custNewAppointment.aptstarttime" name="group1" value="{{aptstarttime}}">
                                                                    </div>
                                                                </div> -->
																<ul style="width:22%;">
																	<li style="white-space: nowrap;" ng-repeat="aptstarttime in aptStartTime track by $index">
																		<input type="radio" ng-model="custNewAppointment.aptstarttime" name="group1" value="{{aptstarttime}}">
																	</li>
																</ul>

                                                                <ul style="width:78%;" id="ulst">
                                                                    <li style="white-space: nowrap;" ng-repeat="aptslot in aptSlotTimeFrom track by $index">
                                                                        <span>{{aptslot}}</span>
                                                                    </li>
                                                                </ul>
                                                            </td>
                                                            <!--<td width="2%">
                                                                <ul id="uldash">
                                                                    <li style="white-space: nowrap;" ng-repeat="dash in spaceDash track by $index">
																		<span>{{dash}}</span>
																	</li>
                                                                </ul>
                                                            </td>
                                                            <td width="10%" style="vertical-align:top">
                                                                <ul id="ulet">
                                                                    <li style="white-space: nowrap;" ng-repeat="aptslot1 in aptSlotTimeTo track by $index">
																		<span>{{aptslot1}}</span>
																	</li>
                                                                </ul>
                                                            </td>-->
                                                            <td width="44%">&nbsp;</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">&nbsp;</td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <div>
                    <button style="float:left" ng-click="showBack('custDetails')" type="button"> Back </button>
                    <button style="float:right" ng-click="showNext('custAddress')" type="button" ng-disabled="!(!!custNewAppointment.aptstarttime)"> Next </button>
                </div>
            </div>

            <div ng:show="custAddress" id="custAddress" style="padding: 10px;">
                <div style="min-height: 275px;">
                    <table border="0" width="100%">
                        <tr>
                            <th> Customer Address  </th>
                        </tr>
                        <tr><td>&nbsp;</td></tr>
                        <tr>
                            <td align="right" style="vertical-align:top" class="clswidth2"> Appointment Address : </td>
                            <td>
                               <textarea maxlength="150" class="clstextarea clsspace2" ng-trim="false" rows="5" 1cols="80" name="patientResidenceAddress"
										  data-ng-model="custNewAppointment.residenceAddress"
										  data-ng-class="{red3: custNewAppointmentForm.custForm.patientResidenceAddress.$invalid && custNewAppointmentForm.custForm.patientResidenceAddress.$dirty, green3: custNewAppointmentForm.custForm.patientResidenceAddress.$valid && custNewAppointmentForm.custForm.patientResidenceAddress.$dirty}"
										  title="Enter Appointment Address"
										  placeholder="Enter Appointment Address"
                                data-ng-required="true" >
								</textarea>
								<span>{{150 - custNewAppointment.residenceAddress.length}} left</span>
								<span style="color:red" data-ng-show="custNewAppointmentForm.custForm.patientResidenceAddress.$dirty && custNewAppointmentForm.custForm.patientResidenceAddress.$invalid">
										<span data-ng-show="custNewAppointmentForm.custForm.patientResidenceAddress.$error.required">&nbsp;&nbsp;&nbsp;&nbsp; Appointment Address is required.</span>
								</span>
                            </td>
                        </tr>
					<tr style="display:none">
							<td>&nbsp;</td>
							<td align="left" style="vertical-align:top">
								&nbsp;&nbsp;<input type="checkbox" name="vehicle" id="checkboxAddress" data-ng-model="custNewAppointment.check"> Do you want appointment on residence address?
							</td>
						</tr>
						
						<tr style="display:none">
							<td colspan="2" align="left">
								<div ng:show="divAptAddress" id="divAptAddress">
									<table width="100%">
										<tr>
											<td align="right" style="vertical-align:top" class="clswidth2"> Appointment Address : </td>
											<td>
												<textarea maxlength="150" class="clstextarea clsspace2" ng-trim="false" rows="5" 1cols="80" name="patientAppointmentAddress" 
														  data-ng-model="custNewAppointment.appointmentAddress"
														  data-ng-class="{red3: custNewAppointmentForm.custForm.patientAppointmentAddress.$invalid && custNewAppointmentForm.custForm.patientAppointmentAddress.$dirty, green3: custNewAppointmentForm.custForm.patientAppointmentAddress.$valid && custNewAppointmentForm.custForm.patientAppointmentAddress.$dirty}"
														  title="Enter Customer Appointment Address"
														  placeholder="Enter Customer Appointment Address"
														  data-ng-required="true" >
												</textarea>
												<span>{{150 - custNewAppointment.appointmentAddress.length}} left</span>
												<span style="color:red" data-ng-show="custNewAppointmentForm.custForm.patientAppointmentAddress.$dirty && custNewAppointmentForm.custForm.patientAppointmentAddress.$invalid">
														<span data-ng-show="custNewAppointmentForm.custForm.patientAppointmentAddress.$error.required">&nbsp;&nbsp;&nbsp;&nbsp; Appointment Address is required.</span>
												</span>
											</td>
										</tr>
									</table>
								</div>
							</td>
						</tr>
						
                        <tr><td>&nbsp;</td></tr>
                        <tr>
                            <td align="right" style="vertical-align:top" class="clswidth2"> Customer Comment : </td>
                            <td>
                                &nbsp;&nbsp;<textarea maxlength="50" class="clstextarea" ng-trim="false" rows="3" 1cols="80" name="patientComment"
                                data-ng-model="custNewAppointment.comment"
                                data-ng-class="{red3: custNewAppointmentForm.custForm.patientComment.$invalid && custNewAppointmentForm.custForm.patientComment.$dirty, green3: custNewAppointmentForm.custForm.patientComment.$valid && custNewAppointmentForm.custForm.patientComment.$dirty}"
                                title="Enter customer comment"
                                placeholder="Enter customer comment"
                                data-ng-required="false" >
								</textarea>
                                <span>{{50 - custNewAppointment.comment.length}} left</span>
								<span style="color:red" data-ng-show="custNewAppointmentForm.custForm.patientComment.$dirty && custNewAppointmentForm.custForm.patientComment.$invalid">
										<span data-ng-show="custNewAppointmentForm.custForm.patientComment.$error.required">&nbsp;&nbsp;&nbsp;&nbsp; Comment is required.</span>
								</span>
								<div id="errormsg" style="color:red;"></div>
                            </td>
                        </tr>
                    </table>
                </div>
				
                <div>
                    <button style="float:left" ng-click="showBack('serviceProvider')" type="button"> Back </button>
					<button data-ng-if="residenceAddressFlag" style="float:right" type="submit" ng-disabled="!(!!custNewAppointment.residenceAddress)" ng-click="aptSubmit();"> Confirm </button>
					<button data-ng-if="!residenceAddressFlag" style="float:right" type="submit" ng-disabled="!(!!custNewAppointment.residenceAddress && custNewAppointment.appointmentAddress)" ng-click="aptSubmit();"> Confirm </button>
                </div>
            </div>

            <div ng:show="aptConfirmMsg" id="aptConfirmMsg" style="padding: 10px;">
                <div style="min-height: 275px;">
                    <table border="0" width="100%">
                        <tr>
                            <td>
                                <div ng-model="frm.submit" style="color:green; text-align:center;"> Thank you for confirming appointment. Appointment reference number is {{frm.submit}}. 
                                   <div style="display:inline;">
                                       <img height="1" width="1" style="border-style:none;" alt="" src="https://www.googleadservices.com/pagead/conversion/845120495/?value=599.00&amp;currency_code=INR&amp;label=186DCO__snMQ74f-kgM&amp;guid=ON&amp;script=0"/>
                                   </div>
                               </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

        </form>
    </div>
</div>